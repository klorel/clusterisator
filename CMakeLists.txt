CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(clusterisator)

OPTION( WITH_TESTS "Build tests" OFF)
OPTION( WITH_PROF "Build with profiling" OFF)
OPTION( WITH_DEBUG "Build in debug mode" OFF)


INCLUDE_DIRECTORIES( . )
MESSAGE("CMAKE_BINARY_DIR : ${CMAKE_BINARY_DIR}")
MESSAGE("CMAKE_SOURCE_DIR : ${CMAKE_SOURCE_DIR}")

SET(EXECUTABLE_OUTPUT_PATH	${CMAKE_BINARY_DIR})
SET(   LIBRARY_OUTPUT_PATH	${CMAKE_BINARY_DIR})

IF( WITH_TESTS )
	INCLUDE_DIRECTORIES( gmock-1.6.0/gtest/include)
ENDIF( WITH_TESTS )



IF( WITH_TESTS )
    ADD_SUBDIRECTORY(gmock-1.6.0)
ENDIF( WITH_TESTS )


IF( WIN32 )
	SET( CMAKE_CONFIGURATION_TYPES "Debug;Release;" CACHE STRING "limited configs" FORCE)
	SET( CMAKE_CXX_FLAGS_DEBUG          "/D_DEBUG /MTd /Zi /Ob0 /Od /RTC1" )
	SET( CMAKE_CXX_FLAGS_RELEASE        "/MT /O2 /Ob2 /D NDEBUG")
ELSE()
	SET ( CMAKE_BUILD_TYPE "RELEASE"     )
#	SET ( CMAKE_BUILD_TYPE "DEBUG"     )
#	IF( WITH_DEBUG )
#		SET ( CMAKE_BUILD_TYPE "DEBUG"     )
#	ELSE( WITH_DEBUG )
#		SET ( CMAKE_BUILD_TYPE "RELEASE"     )
#	ENDIF( WITH_DEBUG )

	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x -pedantic -fmessage-length=0  -fPIC" )
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Wextra -Wno-conversion -Wno-sign-compare")
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-strict-aliasing -Wno-unused-parameter")
ENDIF( WIN32 )

IF( WITH_PROF )
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -pg")
ENDIF( WITH_PROF )
if( WIN32 )
	SET(CPLEX_INC "C:/Program Files (x86)/IBM/ILOG/CPLEX_Studio124/cplex/include/ilcplex")
	SET(CPLEX_LIB "C:/Program Files (x86)/IBM/ILOG/CPLEX_Studio124/cplex/lib/x86_windows_vs2010/stat_mtd")
ELSE()
	SET(CPLEX_INC "/opt/cplex124/cplex/include/ilcplex")
	SET(CPLEX_LIB "/opt/cplex124/cplex/lib/x86-64_sles10_4.1/static_pic")
ENDIF()
INCLUDE_DIRECTORIES(${CPLEX_INC})
ADD_SUBDIRECTORY(clustering)
# ADD_SUBDIRECTORY(projet_zz)
# ADD_SUBDIRECTORY(kmeans)
ADD_SUBDIRECTORY(heuristic)
ADD_SUBDIRECTORY(bipartite)
# ADD_SUBDIRECTORY(programs)
ADD_SUBDIRECTORY(data_bipartite)
ADD_SUBDIRECTORY(data_unipartite)
ADD_SUBDIRECTORY(csdp)
ADD_SUBDIRECTORY(cliquepartionning)

IF( WITH_TESTS )
    ENABLE_TESTING()
    ADD_SUBDIRECTORY(tests)
ENDIF( WITH_TESTS )

